<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>vertification</title>
		<link rel="stylesheet" href="css/style.css"/>
		<link rel="stylesheet" href="css/btn.css"/>
	</head>
	<body>
			<header>
					<div class="out-headtop">
						<div class="headtop">
							<p class="left">
								<span class="en-name">TradeBees</span><span class="zh-name">买书卖书网</span>
							</p>
							<div class="right">
													<span class="login"><a href="/login" style="color: #fff">登录</a></span><span class="split">|</span>
									<span class="register"><a href="/user/register/type" style="color: #fff">注册</a></span>
																<ol class="login-down">
									
													</ol>
																															<input type='text' class="home-register" style="display: none;">
				
							</div>
						</div>
					</div>
					<div class="buyer-bottom">
						<div class="headbottom">
							<a href="/"><img src="/tradebees/assets/images/logo.png"/></a>
							<span>欢迎注册</span>
						</div>
					</div>
				</header>
				
		<div class='buyer-register-list'>
		<form id="enterForm" name="register_form" method="post" action="https://books.maishumaishu.com/confirm/buyer/register">
            <input type="hidden" name="_token" value="EU56SQLsXbRYwSkquqff14vPa0Z30T8N9RpgUMwu">

            <ul>
                                <li>
                    <label>公司ID：</label>
                    <input name="account-cid" type="text" class="shi-input" placeholder="请输入公司ID(CID)">
                    <br/>	
                    <span class="tip_info"></span>
                </li>
                <li>
                    <label>电子邮箱：</label>
                    <input name="personal_info-email" type="text" class="shi-input" placeholder="请输入电子邮箱">
                    	<br/>
                    <span class="tip_info"></span>
                </li>
                <li>
                    <label>请设置密码：</label>
                    <input name="account-password" id="account_password" type="password" class="shi-input" placeholder="密码长度6-20位">
                    <br/>
                    <span class="tip_info"></span>
                </li>
                <li>
                    <label>请确认密码：</label>
                    <input name="account-password_confirmation" type="password" class="shi-input" placeholder="请确认密码">
                    <br/>
                    <span class="tip_info"></span>
                </li>
                <li>
                    <label>营业执照公司名称：</label>
                    <input name="company_info-legal_name" type="text" class="shi-input" placeholder="请输入营业执照公司的名称">
                    <br/>
                    <span class="tip_info"></span>
                </li>
                <li>
                    <label>显示的公司名称：</label>
                    <input name="company_info-display_name" type="text" class="shi-input" placeholder="请输入显示的公司名称">
                    <br/>
                    <span class="tip_info"></span>
                </li>
                <li>
                    <label>公司联系电话：</label>
                    <input name="company_info-phone" type="text" class="shi-input" placeholder="请输入公司电话">
                    <br/>
                    <span class="tip_info"></span>
                </li>
				<li></li>
                
                <li>
                                                                                                                                        </li>
                <li>
                    <label>验证手机：</label>
                    <input name="personal_info-phone" type="text" class="shi-input" placeholder="请输入手机号码">
                    <br/>
                    <span class="tip_info"></span>
                </li>
                <li>
                    <label>短信验证码：</label>
                    <input id="phone_code" data-required name="phone_code" type="text" class="shi-input" placeholder="请输入短信验证码">
                    
                    <button type="button" id="phone_btn" name="phone_code_btn" onclick="showtime(90)">获取验证码</button>
                	<br/>
                	<span class="tip_info"></span>
                </li>
                <li>
                    
                    <input type="checkbox" name="i-agree" value="iagree"/>
                    <a href="/upload/account/contracts/default_contract_zh.pdf"  target="_blank"><span>我同意服务条款</span></a>
                    <br/>
                    <span class="tip_info" style="color:red;text-align: center;"></span>
                </li>
                <li>
                    <button type="submit">立即注册</button>
                </li>
            </ul>
        </form>
	</div>
		
	</body>
</html>
<script src="js/jquery.js"></script>
<script src="js/jquery.validate.js"></script>
<script>
	 /**
     * 表单前端验证
     */
	 $(function(){
        $("#enterForm").validate({
            rules:{
                "account-cid":{
                    required:true,
                    checkCid:true,
                    minlength:2,
                    maxlength:20,
                    remote:{
                        url:"https://books.maishumaishu.com/user/checkCid",
                        type:"post",
                        data:{_token: "EU56SQLsXbRYwSkquqff14vPa0Z30T8N9RpgUMwu"}
                    }
                },
                "personal_info-email":{
                    required:true,
                    checkEmail:true,
                    remote:{
                        url:"https://books.maishumaishu.com/user/checkEmail",
                        type:"post",
                        data:{_token: "EU56SQLsXbRYwSkquqff14vPa0Z30T8N9RpgUMwu"}
                    }
                },
                "account-password":{
                    required:true,
                    minlength:6,
                    maxlength:20
                },
                "account-password_confirmation":{
                    required:true,
                    equalTo:"#account_password"

                },
                "company_info-legal_name":{
                    required:true,
                    maxlength:50,
                    checkLegalName:true,
                    remote:{
                        url:"https://books.maishumaishu.com/user/checkLegalName",
                        type:"post",
                        data:{_token: "EU56SQLsXbRYwSkquqff14vPa0Z30T8N9RpgUMwu"}
                    }
                },
                "company_info-display_name":{
                    required:true,
                    maxlength:50,
                    checkLegalName:true

                },
                "company_info-phone":{
                    required:true,
                    maxlength:20,
                    checkCompanyPhone:true

                },
                "personal_info-phone":{
                    required:true,
                    phone:true,
                    remote:{
                        url:"https://books.maishumaishu.com/user/checkPhone",
                        type:"post",
                        data:{_token: "EU56SQLsXbRYwSkquqff14vPa0Z30T8N9RpgUMwu"}
                    }
                },
                "phone_code":{
                    required:true,
                    maxlength:6,
                    remote:{
                        url:"https://books.maishumaishu.com/user/checkPhoneCode",
                        type:"post",
                        dataType:'json',
                        data:{
                            _token: "EU56SQLsXbRYwSkquqff14vPa0Z30T8N9RpgUMwu",
                            phone:function() {
                                return $("input[name=personal_info-phone]").val();
                            }
                        }
                    }
                },
                "i-agree":{
                    required:true
                }
            },
            messages:{
                "account-cid":{
                    required:"公司ID必填！",
                    minlength:"公司ID至少2个字符！",
                    maxlength:"公司ID最多20个字符！",
                    remote:"该公司ID已被注册！"
                },
                "personal_info-email":{
                    required:"电子邮箱必填！",
                    remote:"该电子邮箱已被注册！"
                },
                "account-password":{
                    required:"密码必填！",
                    minlength:"密码至少为6位！",
                    maxlength:"密码最多为20位！"
                },
                "account-password_confirmation":{
                    required:"确认密码必填！",
                    equalTo:"请输入相同密码！",
                },
                "company_info-legal_name":{
                    required:"营业执照公司名称必填！",
                    maxlength:"营业执照公司名称最多50个字符！",
                    remote:"该名称已被注册！"
                },
                "company_info-display_name":{
                    required:"显示公司名称必填！",
                    maxlength:"显示公司名称最多50个字符！"
                },
                "company_info-phone":{
                    required:"公司联系电话必填！",
                    maxlength:"公司联系电话最多20位！"
                },
                "personal_info-phone":{
                    required:"验证手机必填！",
                    remote:"该手机号已被注册！"
                },
                "phone_code":{
                    required:"短信验证码必填！",
                    maxlength:"验证码为6位！",
                    remote:"该手机验证码无效，请核对！"
                },
                "i-agree":{
                    required:"请确认同意！",
                }
            },
            //是否在获取焦点时验证
            //onfocusout:false,
            //是否在敲击键盘时验证
            onkeyup:true,
            //提交表单后，（第一个）未通过验证的表单获得焦点
            focusInvalid:false,
            //当未通过验证的元素获得焦点时，移除错误提示
            focusCleanup:false,
            errorPlacement: function(error, element){
                error.appendTo(element.parent().find("span.tip_info"));
            },success:"valid"
        });

        //自定义正则表达示验证方法
        $.validator.addMethod("checkEmail",function(value,element,params){
            var checkEmail = /^[a-z0-9.]+@([a-z0-9]+\.)+[a-z]{2,4}$/;
            return this.optional(element)||(checkEmail.test(value));
        },"请输入正确的邮箱！");

        $.validator.addMethod("phone",function(value,element,params){
            var reg = /^0?1[3|4|5|7|8|9]\d{9}$/;
            if(params == true && reg.test(value) == false && value != ""){
                return false;
            }else{
                return true;
            }
        },"请输入正确的手机号！");

        $.validator.addMethod("checkCid",function(value,element,params){
            var checkCid = /^[A-Za-z0-9]{1}[A-Za-z0-9_-]{1,19}$/;
            return this.optional(element)||(checkCid.test(value));
        },"请输入正确的公司ID！");

        $.validator.addMethod("checkLegalName",function(value,element,params){
            var checkLegalName = /^[a-zA-Z0-9()（）_\u4e00-\u9fa5]+$/;
            return this.optional(element)||(checkLegalName.test(value));
        },"请输入正确名称！");

        $.validator.addMethod("checkCompanyPhone",function(value,element,params){
            var checkCompanyPhone = /[+]?[0-9-_\s]{6,18}[0-9]$/;
            return this.optional(element)||(checkCompanyPhone.test(value));
        },"请输入正确的电话号！");
    });

</script>